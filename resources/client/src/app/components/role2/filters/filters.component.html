<div class="expansion-panel">
    <mat-accordion>
        <mat-expansion-panel>

            <!-- Panel Header -->
            <mat-expansion-panel-header>

                <!-- Panel Title -->
                <mat-panel-title>
                    Filter Options
                </mat-panel-title>

                <!-- Panel Description -->
                <mat-panel-description>

                    <!-- Settings Icon -->
                    <mat-icon>filter_alt</mat-icon>

                    <!-- Filters Applied -->
                    <span *ngIf="((filterForm.value | keyvalue) | arrayFilter : filterFunction).length > 0">
                        {{ ((filterForm.value | keyvalue) | arrayFilter : filterFunction).length }}
                        Filter{{ ((filterForm.value | keyvalue) | arrayFilter : filterFunction).length > 1 ? 's' : '' }} Applied
                    </span>

                    <!-- Internal ID -->
                    <span *ngIf="_idInput.value">
                        &nbsp;| Internal ID Contains: <strong>{{ _idInput.value }}</strong>
                    </span>

                    <!-- Role Name -->
                    <span *ngIf="roleNameInput.value">
                        &nbsp;| Role Name Contains: <strong>{{ roleNameInput.value }}</strong>
                    </span>

                    <!-- Role Type -->
                    <span *ngIf="primaryRoleInput.value">
                        &nbsp;| Role Type: <strong>{{ primaryRoleInput.value ? 'Primary Roles' : 'Non-Primary Roles' }}</strong>
                    </span>

                </mat-panel-description>

            </mat-expansion-panel-header>

            <!-- Filters -->
            <form #dataOptionsForm="ngForm" (ngSubmit)="onSubmitForm()">

                <!-- Internal ID -->
                <mat-form-field>
                    <mat-label>Internal ID</mat-label>
                    <input matInput [formControl]="_idInput" placeholder="e.g. RO177">
                    <button *ngIf="_idInput.value" matSuffix mat-icon-button aria-label="Clear" (click)="_idInput.setValue(null)" tabindex="-1">
                        <mat-icon>close</mat-icon>
                    </button>
                </mat-form-field>

                <!-- Role Name -->
                <mat-form-field>
                    <mat-label>Role Name</mat-label>
                    <input matInput [formControl]="roleNameInput" placeholder="e.g. CLINICAL COMMISSIONING GROUP">
                    <button *ngIf="roleNameInput.value" matSuffix mat-icon-button aria-label="Clear" (click)="roleNameInput.setValue(null)" tabindex="-1">
                        <mat-icon>close</mat-icon>
                    </button>
                </mat-form-field>

                <!-- Primary Role -->
                <mat-radio-group [formControl]="primaryRoleInput">
                    <mat-radio-button [value]="true">Primary Roles</mat-radio-button>
                    <mat-radio-button [value]="false">Non-Primary Roles</mat-radio-button>
                    <mat-radio-button [value]="null">Both</mat-radio-button>
                </mat-radio-group>

                <!--  Submit Button -->
                <button mat-raised-button color="primary" [disabled]="filterForm.invalid">
                    Refresh Data
                </button>

                <!-- Error Messages -->
                <mat-error *ngIf="filterForm.hasError('atLeastOneRequired')">
                    {{ filterForm.errors?.['atLeastOneRequired'] }}
                </mat-error>

            </form>

        </mat-expansion-panel>

    </mat-accordion>

</div>
