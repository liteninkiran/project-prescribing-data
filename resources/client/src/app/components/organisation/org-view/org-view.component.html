<h1>Organisation</h1>

<h2>{{ id }}</h2>



<div class="flex-container">

    <!-- Controls -->
    <div class="flex-child flex-controls">

        <form>

            <fieldset class="field_set">

                <legend>
                    Parameters
                </legend>

                <div class="filter-container">

                    <mat-label>
                        Zoom Level: {{ zoomInput.value }}
                    </mat-label>

                    <mat-slider [min]="zoomSettings.min" [max]="zoomSettings.max" step="1">
                        <input matInput matSliderThumb [formControl]="zoomInput" (dragEnd)="dragEnd($event)" #zoomSlider>
                    </mat-slider>

                    <!-- Primary Role -->
                    <mat-form-field>

                        <!-- Label -->
                        <mat-label>
                            Primary Role
                        </mat-label>

                        <!-- Primary Role List -->
                        <mat-select
                            #primaryRoleSelect
                            [formControl]="primaryRolesInput"
                            placeholder="Select Role(s)"
                            multiple
                            [panelClass]="['long-list', 'select-icon']"
                        >
                            <mat-option *ngFor="let role of (primaryRoles$ | async)" [value]="role.id" class="small-font">
                                <div class="select-container">
                                    <div class="select-display-name">
                                        {{ role.display_name }}
                                    </div>
                                    <div>
                                        <img *ngIf="role.icon" [src]="role.icon" />
                                    </div>
                                </div>
                            </mat-option>
                        </mat-select>

                        <!-- Clear Contents -->
                        <button
                            *ngIf="primaryRolesInput.value?.length || 0 > 0"
                            matSuffix
                            mat-icon-button
                            aria-label="Clear"
                            (click)="primaryRolesInput.setValue(null)"
                        >
                            <mat-icon>close</mat-icon>
                        </button>

                    </mat-form-field>
                
                </div>

            </fieldset>

        </form>

    </div>

    <!-- Map -->
    <div class="flex-child flex-map">
        <div class="map-container">
            <shared-map
                [data]="mapData"
                [manualZoom]="zoomInput.value || zoomSettings.min"
                [zoom]="zoomSettings"
                [mapOptions]="mapOptions"
                borderRadius="50%"
            ></shared-map>
        </div>
    </div>
    
</div>
